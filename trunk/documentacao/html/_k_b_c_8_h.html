<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Jogo do Galo: KBC.H File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>KBC.H File Reference</h1><code>#include &lt;dos.h&gt;</code><br/>
<code>#include &lt;pc.h&gt;</code><br/>
<code>#include &quot;<a class="el" href="utypes_8h_source.html">utypes.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="_t_i_m_e_r_8_h_source.html">timer.h</a>&quot;</code><br/>
<code>#include &quot;<a class="el" href="ints_8h_source.html">ints.h</a>&quot;</code><br/>

<p><a href="_k_b_c_8_h_source.html">Go to the source code of this file.</a></p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td colspan="2"><h2>Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a34599ca5c55cb9be3b235d7422aff45c">KBC_TIMEOUT</a>&nbsp;&nbsp;&nbsp;30</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">maximum amount of milliseconds to wait for KBC response/availability  <a href="#a34599ca5c55cb9be3b235d7422aff45c"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">The hardware register addresses</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp372a25e47c984857a96cb8cf822c3828"></a> </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#abf7206ca2181c36ef04b795c9b64e886">CMD_REG</a>&nbsp;&nbsp;&nbsp;0x64</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">command register (read only)  <a href="#abf7206ca2181c36ef04b795c9b64e886"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a89c4d098b53809674457b1660b1af780">STAT_REG</a>&nbsp;&nbsp;&nbsp;0x64</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">status register (write only)  <a href="#a89c4d098b53809674457b1660b1af780"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a71b8ba376f687142f60a82d18c2715e0">DATA_REG</a>&nbsp;&nbsp;&nbsp;0x60</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">data register (read/write)  <a href="#a71b8ba376f687142f60a82d18c2715e0"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Bit meanings in the status register</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpcc3c1babe399c18ae5111c8ae432a682"></a> </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a45967c9e25447ba853cf6fb4ac545fe6">OBF</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 0)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Output Buffer Full.  <a href="#a45967c9e25447ba853cf6fb4ac545fe6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a3c48b10907056351582baf9f6478598e">IBF</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 1)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Input Buffer Full.  <a href="#a3c48b10907056351582baf9f6478598e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a1b41fd2be63532d4ab910f8b256c3811">AUX</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 5)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">1 if data at DATA_REG came from mouse interface  <a href="#a1b41fd2be63532d4ab910f8b256c3811"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a307ab71673e26ec42b28a3bca05d4cb5">PAR_ERR</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 7)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Parity Error.  <a href="#a307ab71673e26ec42b28a3bca05d4cb5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#ad16f61e2bf70f6c7685e826224ed177f">TO_ERR</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 6)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Timeout Error.  <a href="#ad16f61e2bf70f6c7685e826224ed177f"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">"Historical" commands to send to DATA_REG, response in DATA_REG</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp1716368a8a205f9cb3d6e123ef2ad7b2"></a> </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a9f7743653801b79b2cf7c4a2707882ad">ResetKBC</a>&nbsp;&nbsp;&nbsp;0xFF</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reset the KBC interface.  <a href="#a9f7743653801b79b2cf7c4a2707882ad"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#ae1856867674001a426a9ffb156affcd2">DefaultKBD</a>&nbsp;&nbsp;&nbsp;0xF6</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Set default scancode and repeat rate.  <a href="#ae1856867674001a426a9ffb156affcd2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#aaa35612ed5d4fdbe8000df239239713e">DisableKBD</a>&nbsp;&nbsp;&nbsp;0xF5</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Historical Disable keyboard.  <a href="#aaa35612ed5d4fdbe8000df239239713e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a696342c5acdcc88677782c0f3133b549">EnableKBD</a>&nbsp;&nbsp;&nbsp;0xF4</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Historical clear buffer and enable keyboard.  <a href="#a696342c5acdcc88677782c0f3133b549"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a5e6859fb7c74889de02b86f3a03fec56">KBDRate</a>&nbsp;&nbsp;&nbsp;0xF3</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Keyboard repeat rate, one arg, bits 0-4 repeat rate, bits 5-6 start delay.  <a href="#a5e6859fb7c74889de02b86f3a03fec56"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a59358190e83ceb32a586e77d01a536c6">WriteLEDS</a>&nbsp;&nbsp;&nbsp;0xED</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Turn on/off KBD LEDS, one arg, one bit per led, bits 0-2, 0-off, 1-on.  <a href="#a59358190e83ceb32a586e77d01a536c6"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a1762a3d7ed4ff016f09dd89a931ac871">SCROLL_LOCK</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 0)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">SCROLL_LOCK led for WriteLEDS command.  <a href="#a1762a3d7ed4ff016f09dd89a931ac871"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a4dec6ba83b643ca753f0be5b167b02ae">NUM_LOCK</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 1)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">NUM__LOCK led for WriteLEDS command.  <a href="#a4dec6ba83b643ca753f0be5b167b02ae"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a7d5d3b2ce697563a426c7fda967af9d7">CAPS_LOCK</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 2)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">CAPS_LOCK led for WriteLEDS command.  <a href="#a7d5d3b2ce697563a426c7fda967af9d7"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Response codes to commands/data written in DATA_REG</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp62016c23d116959053588abaf99205c0"></a> </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a6f6489887e08bff4887d0bc5dcf214d8">ACK</a>&nbsp;&nbsp;&nbsp;0xFA</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Acknowledge OK response.  <a href="#a6f6489887e08bff4887d0bc5dcf214d8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a0ad9f0fd5fc87aa4630979da018fdb39">Resend</a>&nbsp;&nbsp;&nbsp;0xFE</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Resend error response; on multibyte commands the whole command must be resent from the beginning.  <a href="#a0ad9f0fd5fc87aa4630979da018fdb39"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a0f20a163dec609fb464cba845e043be8">Error</a>&nbsp;&nbsp;&nbsp;0xFC</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Error.  <a href="#a0f20a163dec609fb464cba845e043be8"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Command codes to send to CMD_REG, args, if exists, to DATA_REG, return values in DATA_REG</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpdc724bbab76fd2644c24a001008cbe73"></a> </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a99bbff320189ff927ad8d28b32d0a3e2">ReadCommand</a>&nbsp;&nbsp;&nbsp;0x20</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Read Command_Byte.  <a href="#a99bbff320189ff927ad8d28b32d0a3e2"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a177bb59d36f14c1024b2de1601693605">WriteCommand</a>&nbsp;&nbsp;&nbsp;0x60</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write Command_Byte, one arg.  <a href="#a177bb59d36f14c1024b2de1601693605"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a884864c92108739e60113ca2079cbe71">DisableMouse</a>&nbsp;&nbsp;&nbsp;0xA7</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Disable Mouse Interface.  <a href="#a884864c92108739e60113ca2079cbe71"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#acaa321c74955e015d83da05cd321c0f8">EnableMouse</a>&nbsp;&nbsp;&nbsp;0xA8</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable Mouse Interface.  <a href="#acaa321c74955e015d83da05cd321c0f8"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#ab47f9ef099e1f33e026e5ee549900624">TestMouse</a>&nbsp;&nbsp;&nbsp;0xA9</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Test Mouse Interface, returns 0 if OK.  <a href="#ab47f9ef099e1f33e026e5ee549900624"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#af555314895f7b6544624a51f22e3aeb0">Test8042</a>&nbsp;&nbsp;&nbsp;0xAA</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Test KBC, returns 0x55 if sucess, 0xFC on error.  <a href="#af555314895f7b6544624a51f22e3aeb0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a5414bbfebe830e7887014106d3fd681e">TestKBD</a>&nbsp;&nbsp;&nbsp;0xAB</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Test mouse, returns 0 if OK.  <a href="#a5414bbfebe830e7887014106d3fd681e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a69a0c992535a868edcb9362b52859914">NDisableKBD</a>&nbsp;&nbsp;&nbsp;0xAD</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">New (versus historical) Disable keyboard.  <a href="#a69a0c992535a868edcb9362b52859914"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#ace4e2548e5f13bab908c668fe5df5819">NEnableKBD</a>&nbsp;&nbsp;&nbsp;0xAE</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">New (versus historical) Enable keyboard.  <a href="#ace4e2548e5f13bab908c668fe5df5819"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a1ace60d764c21d4e3dfe01f6b9b401e0">WriteMouse</a>&nbsp;&nbsp;&nbsp;0xD4</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Write Mouse, one arg, see "Commands for the Mouse".  <a href="#a1ace60d764c21d4e3dfe01f6b9b401e0"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a01e50ef9f098e20f6b0b0429644862cf">ResetPC</a>&nbsp;&nbsp;&nbsp;0xFE</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Reset PC (reboot).  <a href="#a01e50ef9f098e20f6b0b0429644862cf"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Bit meanings in the Command_Byte</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp22837900a5e0efd014657e1817de0ea4"></a> (read/write with command ReadCommand/WriteCommand) </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#afc6b776bcf10fb8d8c84c9e2a924025e">INT_1</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 0)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable generation of interrupts from keyboard.  <a href="#afc6b776bcf10fb8d8c84c9e2a924025e"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a474732bbd6e6c485541a39fb44b88325">INT_12</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 1)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable generation of interrupts from mouse.  <a href="#a474732bbd6e6c485541a39fb44b88325"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a9e6ea2b423d7213db16c4975aaf38899">EN_KBD</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 4)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable keyboard interface.  <a href="#a9e6ea2b423d7213db16c4975aaf38899"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#af9776e4566c3a77a7c3631530998f386">EN_MOUSE</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 5)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Enable mouse interface.  <a href="#af9776e4566c3a77a7c3631530998f386"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Commands to the Mouse</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp3da47b5f248be7cc1555cc8bccfb63fc"></a> Prefaced with command WriteMouse </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#ad6089b7326e09854f0670e5dd3b4612a">MouseReset</a>&nbsp;&nbsp;&nbsp;0xFF</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a1e9689f4bb2acbcbb8c83dde66b2192f">MouseDefaults</a>&nbsp;&nbsp;&nbsp;0xF6</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#ab0514340ae64ca6bd470fc518efb1409">StreamDisable</a>&nbsp;&nbsp;&nbsp;0xF5</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a2ffc6eb402762e3b4f9c553796b9b060">StreamEnable</a>&nbsp;&nbsp;&nbsp;0xF4</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a6109d272a7e0839b7ab18c38b50d8464">SampleRate</a>&nbsp;&nbsp;&nbsp;0xF3</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a6e02bbb2debd87c4a931acec280494e8">ReadDevice</a>&nbsp;&nbsp;&nbsp;0xF2</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#accd8c46af3b38f50c99fbddd7703513d">RemoteMode</a>&nbsp;&nbsp;&nbsp;0xF0</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#ae59f0330db4123de14d87a2594c7f29c">MouseReadData</a>&nbsp;&nbsp;&nbsp;0xEB</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a89e4319b16638bfc84fafa1fb65ca0c2">EnterStream</a>&nbsp;&nbsp;&nbsp;0xEA</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#aef6666aa14f3bea60824b38ecfe4728d">StatusRequest</a>&nbsp;&nbsp;&nbsp;0xE9</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a09e84fb09affc016c2800424cd09b7f6">Resolution</a>&nbsp;&nbsp;&nbsp;0xE8</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#aac83f3dad20cc9a631eb84be0676d358">Scaling2</a>&nbsp;&nbsp;&nbsp;0xE7</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a517de159c505818ad67d371dbec33d53">Scaling1</a>&nbsp;&nbsp;&nbsp;0xE6</td></tr>
<tr><td colspan="2"><div class="groupHeader">Bit meaning in first byte of mouse data packet</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrpe68d2a8ca3256ffc1615a6727eb1de3b"></a> </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a08deb639aef83c70892a364261b09133">YOVF</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 7)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">X overflow.  <a href="#a08deb639aef83c70892a364261b09133"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#ac3172c891b25dafed9ced2476aa03cf1">XOVF</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 6)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Y overflow.  <a href="#ac3172c891b25dafed9ced2476aa03cf1"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a5c610c7c656c4cf62564a959c30e0245">YSGN</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 5)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sign of data packet byte 3 (y movement).  <a href="#a5c610c7c656c4cf62564a959c30e0245"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a1829ceaee57583878dbef19f0bc1a724">XSGN</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 4)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Sign of data packet byte 2 (x movement).  <a href="#a1829ceaee57583878dbef19f0bc1a724"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#ab4abb667b74797a9a64f95d388c4da75">MBT</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 2)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Middle button.  <a href="#ab4abb667b74797a9a64f95d388c4da75"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#abc6d7bd471913c986a226a3893174dfc">RBT</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 1)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Right button.  <a href="#abc6d7bd471913c986a226a3893174dfc"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a6bec57496b9c9cc22e12e62997e5be91">LBT</a>&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 0)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Left button.  <a href="#a6bec57496b9c9cc22e12e62997e5be91"></a><br/></td></tr>
<tr><td colspan="2"><div class="groupHeader">Utility macros to inquiry first byte of mouse data packet</div></td></tr>
<tr><td colspan="2"><div class="groupText"><p><a class="anchor" id="amgrp2e45ba3bddab92f558a292882a6f6d6c"></a> </p>
</div></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a37a6485f1a57d53c63b242f8692c9868">LEFT_BUTTON</a>(dt)&nbsp;&nbsp;&nbsp;(((dt) &amp; LBT) == LBT)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">1 if left button pressed  <a href="#a37a6485f1a57d53c63b242f8692c9868"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a8f2cffb043cf466894e2019ea14c400d">RIGHT_BUTTON</a>(dt)&nbsp;&nbsp;&nbsp;(((dt) &amp; RBT) == RBT)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">1 if right button pressed  <a href="#a8f2cffb043cf466894e2019ea14c400d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#acfa9590af87bbf796387e1c6e01ef5c3">MIDDLE_BUTTON</a>(dt)&nbsp;&nbsp;&nbsp;(((dt) &amp; MBT) == MBT)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">1 if middle button pressed  <a href="#acfa9590af87bbf796387e1c6e01ef5c3"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a43c087e52d2e7260fed09fc0cc7d5752">Y_OVERFLOW</a>(dt)&nbsp;&nbsp;&nbsp;(((dt) &amp; XOVF) == XOVF)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">1 if overflow in x movement  <a href="#a43c087e52d2e7260fed09fc0cc7d5752"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a8c9b6532dd05bc77e9bcef499868d98f">X_OVERFLOW</a>(dt)&nbsp;&nbsp;&nbsp;(((dt) &amp; YOVF) == YOVF)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">1 if overflow in y movement  <a href="#a8c9b6532dd05bc77e9bcef499868d98f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#aaf66ab279fa7f3781953d0c4422a7790">X_SIGN</a>(dt)&nbsp;&nbsp;&nbsp;(((dt) &amp; XSGN) == XSGN ? -1 : 1)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">1 if positive x movement, -1 if negative  <a href="#aaf66ab279fa7f3781953d0c4422a7790"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#aab5db4b8ea62f4cce4c01f703f0c8592">Y_SIGN</a>(dt)&nbsp;&nbsp;&nbsp;(((dt) &amp; YSGN) == YSGN ? -1 : 1)</td></tr>
<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">1 if positive y movement, -1 if negative  <a href="#aab5db4b8ea62f4cce4c01f703f0c8592"></a><br/></td></tr>
<tr><td colspan="2"><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a088f9ac488fbbf9ecf5a7238919c4e2c">kbc_init</a> (int <a class="el" href="_k_b_c_8_h.html#ac3e1795766a80ec63b157951b4b9a7d4">debug</a>)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#ab19779ea7896435b3d4a5ff8a420f37e">write_kbc_data</a> (unsigned data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a52a7ce44125208dfa303e597e6302a71">read_kbc</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#ad0f4763c978797b701c51fe3841ebdb0">write_kbc</a> (unsigned adr, unsigned data)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a71c80934bf15a4691e5a360fe0283227">enable_irq</a> (int irq)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#ac7a35f33ff72f90657561721b263c1d2">disable_irq</a> (int irq)</td></tr>
<tr><td colspan="2"><h2>Variables</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">_go32_dpmi_seginfo&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#a11e96bc1936d8f631c98829b4c565b9f">old_irq2</a></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="_k_b_c_8_h.html#ac3e1795766a80ec63b157951b4b9a7d4">debug</a></td></tr>
</table>
<hr/><h2>Define Documentation</h2>
<a class="anchor" id="a6f6489887e08bff4887d0bc5dcf214d8"></a><!-- doxytag: member="KBC.H::ACK" ref="a6f6489887e08bff4887d0bc5dcf214d8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ACK&nbsp;&nbsp;&nbsp;0xFA</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Acknowledge OK response. </p>

</div>
</div>
<a class="anchor" id="a1b41fd2be63532d4ab910f8b256c3811"></a><!-- doxytag: member="KBC.H::AUX" ref="a1b41fd2be63532d4ab910f8b256c3811" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define AUX&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 5)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>1 if data at DATA_REG came from mouse interface </p>

</div>
</div>
<a class="anchor" id="a7d5d3b2ce697563a426c7fda967af9d7"></a><!-- doxytag: member="KBC.H::CAPS_LOCK" ref="a7d5d3b2ce697563a426c7fda967af9d7" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CAPS_LOCK&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 2)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>CAPS_LOCK led for WriteLEDS command. </p>

</div>
</div>
<a class="anchor" id="abf7206ca2181c36ef04b795c9b64e886"></a><!-- doxytag: member="KBC.H::CMD_REG" ref="abf7206ca2181c36ef04b795c9b64e886" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CMD_REG&nbsp;&nbsp;&nbsp;0x64</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>command register (read only) </p>

</div>
</div>
<a class="anchor" id="a71b8ba376f687142f60a82d18c2715e0"></a><!-- doxytag: member="KBC.H::DATA_REG" ref="a71b8ba376f687142f60a82d18c2715e0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DATA_REG&nbsp;&nbsp;&nbsp;0x60</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>data register (read/write) </p>

</div>
</div>
<a class="anchor" id="ae1856867674001a426a9ffb156affcd2"></a><!-- doxytag: member="KBC.H::DefaultKBD" ref="ae1856867674001a426a9ffb156affcd2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DefaultKBD&nbsp;&nbsp;&nbsp;0xF6</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Set default scancode and repeat rate. </p>

</div>
</div>
<a class="anchor" id="aaa35612ed5d4fdbe8000df239239713e"></a><!-- doxytag: member="KBC.H::DisableKBD" ref="aaa35612ed5d4fdbe8000df239239713e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DisableKBD&nbsp;&nbsp;&nbsp;0xF5</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Historical Disable keyboard. </p>

</div>
</div>
<a class="anchor" id="a884864c92108739e60113ca2079cbe71"></a><!-- doxytag: member="KBC.H::DisableMouse" ref="a884864c92108739e60113ca2079cbe71" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define DisableMouse&nbsp;&nbsp;&nbsp;0xA7</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Disable Mouse Interface. </p>

</div>
</div>
<a class="anchor" id="a9e6ea2b423d7213db16c4975aaf38899"></a><!-- doxytag: member="KBC.H::EN_KBD" ref="a9e6ea2b423d7213db16c4975aaf38899" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EN_KBD&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 4)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enable keyboard interface. </p>

</div>
</div>
<a class="anchor" id="af9776e4566c3a77a7c3631530998f386"></a><!-- doxytag: member="KBC.H::EN_MOUSE" ref="af9776e4566c3a77a7c3631530998f386" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EN_MOUSE&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 5)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enable mouse interface. </p>

</div>
</div>
<a class="anchor" id="a696342c5acdcc88677782c0f3133b549"></a><!-- doxytag: member="KBC.H::EnableKBD" ref="a696342c5acdcc88677782c0f3133b549" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EnableKBD&nbsp;&nbsp;&nbsp;0xF4</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Historical clear buffer and enable keyboard. </p>

</div>
</div>
<a class="anchor" id="acaa321c74955e015d83da05cd321c0f8"></a><!-- doxytag: member="KBC.H::EnableMouse" ref="acaa321c74955e015d83da05cd321c0f8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EnableMouse&nbsp;&nbsp;&nbsp;0xA8</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enable Mouse Interface. </p>

</div>
</div>
<a class="anchor" id="a89e4319b16638bfc84fafa1fb65ca0c2"></a><!-- doxytag: member="KBC.H::EnterStream" ref="a89e4319b16638bfc84fafa1fb65ca0c2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EnterStream&nbsp;&nbsp;&nbsp;0xEA</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a0f20a163dec609fb464cba845e043be8"></a><!-- doxytag: member="KBC.H::Error" ref="a0f20a163dec609fb464cba845e043be8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Error&nbsp;&nbsp;&nbsp;0xFC</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Error. </p>

</div>
</div>
<a class="anchor" id="a3c48b10907056351582baf9f6478598e"></a><!-- doxytag: member="KBC.H::IBF" ref="a3c48b10907056351582baf9f6478598e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IBF&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Input Buffer Full. </p>

</div>
</div>
<a class="anchor" id="afc6b776bcf10fb8d8c84c9e2a924025e"></a><!-- doxytag: member="KBC.H::INT_1" ref="afc6b776bcf10fb8d8c84c9e2a924025e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INT_1&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enable generation of interrupts from keyboard. </p>

</div>
</div>
<a class="anchor" id="a474732bbd6e6c485541a39fb44b88325"></a><!-- doxytag: member="KBC.H::INT_12" ref="a474732bbd6e6c485541a39fb44b88325" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define INT_12&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Enable generation of interrupts from mouse. </p>

</div>
</div>
<a class="anchor" id="a34599ca5c55cb9be3b235d7422aff45c"></a><!-- doxytag: member="KBC.H::KBC_TIMEOUT" ref="a34599ca5c55cb9be3b235d7422aff45c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KBC_TIMEOUT&nbsp;&nbsp;&nbsp;30</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>maximum amount of milliseconds to wait for KBC response/availability </p>

</div>
</div>
<a class="anchor" id="a5e6859fb7c74889de02b86f3a03fec56"></a><!-- doxytag: member="KBC.H::KBDRate" ref="a5e6859fb7c74889de02b86f3a03fec56" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define KBDRate&nbsp;&nbsp;&nbsp;0xF3</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Keyboard repeat rate, one arg, bits 0-4 repeat rate, bits 5-6 start delay. </p>

</div>
</div>
<a class="anchor" id="a6bec57496b9c9cc22e12e62997e5be91"></a><!-- doxytag: member="KBC.H::LBT" ref="a6bec57496b9c9cc22e12e62997e5be91" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LBT&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Left button. </p>

</div>
</div>
<a class="anchor" id="a37a6485f1a57d53c63b242f8692c9868"></a><!-- doxytag: member="KBC.H::LEFT_BUTTON" ref="a37a6485f1a57d53c63b242f8692c9868" args="(dt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LEFT_BUTTON</td>
          <td>(</td>
          <td class="paramtype">dt&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(((dt) &amp; LBT) == LBT)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>1 if left button pressed </p>

</div>
</div>
<a class="anchor" id="ab4abb667b74797a9a64f95d388c4da75"></a><!-- doxytag: member="KBC.H::MBT" ref="ab4abb667b74797a9a64f95d388c4da75" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MBT&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 2)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Middle button. </p>

</div>
</div>
<a class="anchor" id="acfa9590af87bbf796387e1c6e01ef5c3"></a><!-- doxytag: member="KBC.H::MIDDLE_BUTTON" ref="acfa9590af87bbf796387e1c6e01ef5c3" args="(dt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MIDDLE_BUTTON</td>
          <td>(</td>
          <td class="paramtype">dt&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(((dt) &amp; MBT) == MBT)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>1 if middle button pressed </p>

</div>
</div>
<a class="anchor" id="a1e9689f4bb2acbcbb8c83dde66b2192f"></a><!-- doxytag: member="KBC.H::MouseDefaults" ref="a1e9689f4bb2acbcbb8c83dde66b2192f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MouseDefaults&nbsp;&nbsp;&nbsp;0xF6</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ae59f0330db4123de14d87a2594c7f29c"></a><!-- doxytag: member="KBC.H::MouseReadData" ref="ae59f0330db4123de14d87a2594c7f29c" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MouseReadData&nbsp;&nbsp;&nbsp;0xEB</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ad6089b7326e09854f0670e5dd3b4612a"></a><!-- doxytag: member="KBC.H::MouseReset" ref="ad6089b7326e09854f0670e5dd3b4612a" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MouseReset&nbsp;&nbsp;&nbsp;0xFF</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a69a0c992535a868edcb9362b52859914"></a><!-- doxytag: member="KBC.H::NDisableKBD" ref="a69a0c992535a868edcb9362b52859914" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NDisableKBD&nbsp;&nbsp;&nbsp;0xAD</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>New (versus historical) Disable keyboard. </p>

</div>
</div>
<a class="anchor" id="ace4e2548e5f13bab908c668fe5df5819"></a><!-- doxytag: member="KBC.H::NEnableKBD" ref="ace4e2548e5f13bab908c668fe5df5819" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NEnableKBD&nbsp;&nbsp;&nbsp;0xAE</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>New (versus historical) Enable keyboard. </p>

</div>
</div>
<a class="anchor" id="a4dec6ba83b643ca753f0be5b167b02ae"></a><!-- doxytag: member="KBC.H::NUM_LOCK" ref="a4dec6ba83b643ca753f0be5b167b02ae" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NUM_LOCK&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>NUM__LOCK led for WriteLEDS command. </p>

</div>
</div>
<a class="anchor" id="a45967c9e25447ba853cf6fb4ac545fe6"></a><!-- doxytag: member="KBC.H::OBF" ref="a45967c9e25447ba853cf6fb4ac545fe6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define OBF&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Output Buffer Full. </p>

</div>
</div>
<a class="anchor" id="a307ab71673e26ec42b28a3bca05d4cb5"></a><!-- doxytag: member="KBC.H::PAR_ERR" ref="a307ab71673e26ec42b28a3bca05d4cb5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PAR_ERR&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 7)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Parity Error. </p>

</div>
</div>
<a class="anchor" id="abc6d7bd471913c986a226a3893174dfc"></a><!-- doxytag: member="KBC.H::RBT" ref="abc6d7bd471913c986a226a3893174dfc" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RBT&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Right button. </p>

</div>
</div>
<a class="anchor" id="a99bbff320189ff927ad8d28b32d0a3e2"></a><!-- doxytag: member="KBC.H::ReadCommand" ref="a99bbff320189ff927ad8d28b32d0a3e2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ReadCommand&nbsp;&nbsp;&nbsp;0x20</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Read Command_Byte. </p>

</div>
</div>
<a class="anchor" id="a6e02bbb2debd87c4a931acec280494e8"></a><!-- doxytag: member="KBC.H::ReadDevice" ref="a6e02bbb2debd87c4a931acec280494e8" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ReadDevice&nbsp;&nbsp;&nbsp;0xF2</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="accd8c46af3b38f50c99fbddd7703513d"></a><!-- doxytag: member="KBC.H::RemoteMode" ref="accd8c46af3b38f50c99fbddd7703513d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RemoteMode&nbsp;&nbsp;&nbsp;0xF0</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a0ad9f0fd5fc87aa4630979da018fdb39"></a><!-- doxytag: member="KBC.H::Resend" ref="a0ad9f0fd5fc87aa4630979da018fdb39" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Resend&nbsp;&nbsp;&nbsp;0xFE</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Resend error response; on multibyte commands the whole command must be resent from the beginning. </p>

</div>
</div>
<a class="anchor" id="a9f7743653801b79b2cf7c4a2707882ad"></a><!-- doxytag: member="KBC.H::ResetKBC" ref="a9f7743653801b79b2cf7c4a2707882ad" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ResetKBC&nbsp;&nbsp;&nbsp;0xFF</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reset the KBC interface. </p>

</div>
</div>
<a class="anchor" id="a01e50ef9f098e20f6b0b0429644862cf"></a><!-- doxytag: member="KBC.H::ResetPC" ref="a01e50ef9f098e20f6b0b0429644862cf" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ResetPC&nbsp;&nbsp;&nbsp;0xFE</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Reset PC (reboot). </p>

</div>
</div>
<a class="anchor" id="a09e84fb09affc016c2800424cd09b7f6"></a><!-- doxytag: member="KBC.H::Resolution" ref="a09e84fb09affc016c2800424cd09b7f6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Resolution&nbsp;&nbsp;&nbsp;0xE8</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a8f2cffb043cf466894e2019ea14c400d"></a><!-- doxytag: member="KBC.H::RIGHT_BUTTON" ref="a8f2cffb043cf466894e2019ea14c400d" args="(dt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define RIGHT_BUTTON</td>
          <td>(</td>
          <td class="paramtype">dt&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(((dt) &amp; RBT) == RBT)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>1 if right button pressed </p>

</div>
</div>
<a class="anchor" id="a6109d272a7e0839b7ab18c38b50d8464"></a><!-- doxytag: member="KBC.H::SampleRate" ref="a6109d272a7e0839b7ab18c38b50d8464" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SampleRate&nbsp;&nbsp;&nbsp;0xF3</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a517de159c505818ad67d371dbec33d53"></a><!-- doxytag: member="KBC.H::Scaling1" ref="a517de159c505818ad67d371dbec33d53" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Scaling1&nbsp;&nbsp;&nbsp;0xE6</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="aac83f3dad20cc9a631eb84be0676d358"></a><!-- doxytag: member="KBC.H::Scaling2" ref="aac83f3dad20cc9a631eb84be0676d358" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Scaling2&nbsp;&nbsp;&nbsp;0xE7</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a1762a3d7ed4ff016f09dd89a931ac871"></a><!-- doxytag: member="KBC.H::SCROLL_LOCK" ref="a1762a3d7ed4ff016f09dd89a931ac871" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define SCROLL_LOCK&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 0)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>SCROLL_LOCK led for WriteLEDS command. </p>

</div>
</div>
<a class="anchor" id="a89c4d098b53809674457b1660b1af780"></a><!-- doxytag: member="KBC.H::STAT_REG" ref="a89c4d098b53809674457b1660b1af780" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STAT_REG&nbsp;&nbsp;&nbsp;0x64</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>status register (write only) </p>

</div>
</div>
<a class="anchor" id="aef6666aa14f3bea60824b38ecfe4728d"></a><!-- doxytag: member="KBC.H::StatusRequest" ref="aef6666aa14f3bea60824b38ecfe4728d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define StatusRequest&nbsp;&nbsp;&nbsp;0xE9</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ab0514340ae64ca6bd470fc518efb1409"></a><!-- doxytag: member="KBC.H::StreamDisable" ref="ab0514340ae64ca6bd470fc518efb1409" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define StreamDisable&nbsp;&nbsp;&nbsp;0xF5</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a2ffc6eb402762e3b4f9c553796b9b060"></a><!-- doxytag: member="KBC.H::StreamEnable" ref="a2ffc6eb402762e3b4f9c553796b9b060" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define StreamEnable&nbsp;&nbsp;&nbsp;0xF4</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="af555314895f7b6544624a51f22e3aeb0"></a><!-- doxytag: member="KBC.H::Test8042" ref="af555314895f7b6544624a51f22e3aeb0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Test8042&nbsp;&nbsp;&nbsp;0xAA</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Test KBC, returns 0x55 if sucess, 0xFC on error. </p>

</div>
</div>
<a class="anchor" id="a5414bbfebe830e7887014106d3fd681e"></a><!-- doxytag: member="KBC.H::TestKBD" ref="a5414bbfebe830e7887014106d3fd681e" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TestKBD&nbsp;&nbsp;&nbsp;0xAB</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Test mouse, returns 0 if OK. </p>

</div>
</div>
<a class="anchor" id="ab47f9ef099e1f33e026e5ee549900624"></a><!-- doxytag: member="KBC.H::TestMouse" ref="ab47f9ef099e1f33e026e5ee549900624" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TestMouse&nbsp;&nbsp;&nbsp;0xA9</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Test Mouse Interface, returns 0 if OK. </p>

</div>
</div>
<a class="anchor" id="ad16f61e2bf70f6c7685e826224ed177f"></a><!-- doxytag: member="KBC.H::TO_ERR" ref="ad16f61e2bf70f6c7685e826224ed177f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TO_ERR&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 6)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Timeout Error. </p>

</div>
</div>
<a class="anchor" id="a177bb59d36f14c1024b2de1601693605"></a><!-- doxytag: member="KBC.H::WriteCommand" ref="a177bb59d36f14c1024b2de1601693605" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WriteCommand&nbsp;&nbsp;&nbsp;0x60</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write Command_Byte, one arg. </p>

</div>
</div>
<a class="anchor" id="a59358190e83ceb32a586e77d01a536c6"></a><!-- doxytag: member="KBC.H::WriteLEDS" ref="a59358190e83ceb32a586e77d01a536c6" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WriteLEDS&nbsp;&nbsp;&nbsp;0xED</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Turn on/off KBD LEDS, one arg, one bit per led, bits 0-2, 0-off, 1-on. </p>

</div>
</div>
<a class="anchor" id="a1ace60d764c21d4e3dfe01f6b9b401e0"></a><!-- doxytag: member="KBC.H::WriteMouse" ref="a1ace60d764c21d4e3dfe01f6b9b401e0" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WriteMouse&nbsp;&nbsp;&nbsp;0xD4</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Write Mouse, one arg, see "Commands for the Mouse". </p>

</div>
</div>
<a class="anchor" id="a8c9b6532dd05bc77e9bcef499868d98f"></a><!-- doxytag: member="KBC.H::X_OVERFLOW" ref="a8c9b6532dd05bc77e9bcef499868d98f" args="(dt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define X_OVERFLOW</td>
          <td>(</td>
          <td class="paramtype">dt&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(((dt) &amp; YOVF) == YOVF)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>1 if overflow in y movement </p>

</div>
</div>
<a class="anchor" id="aaf66ab279fa7f3781953d0c4422a7790"></a><!-- doxytag: member="KBC.H::X_SIGN" ref="aaf66ab279fa7f3781953d0c4422a7790" args="(dt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define X_SIGN</td>
          <td>(</td>
          <td class="paramtype">dt&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(((dt) &amp; XSGN) == XSGN ? -1 : 1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>1 if positive x movement, -1 if negative </p>

</div>
</div>
<a class="anchor" id="ac3172c891b25dafed9ced2476aa03cf1"></a><!-- doxytag: member="KBC.H::XOVF" ref="ac3172c891b25dafed9ced2476aa03cf1" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XOVF&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 6)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Y overflow. </p>

</div>
</div>
<a class="anchor" id="a1829ceaee57583878dbef19f0bc1a724"></a><!-- doxytag: member="KBC.H::XSGN" ref="a1829ceaee57583878dbef19f0bc1a724" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define XSGN&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 4)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sign of data packet byte 2 (x movement). </p>

</div>
</div>
<a class="anchor" id="a43c087e52d2e7260fed09fc0cc7d5752"></a><!-- doxytag: member="KBC.H::Y_OVERFLOW" ref="a43c087e52d2e7260fed09fc0cc7d5752" args="(dt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Y_OVERFLOW</td>
          <td>(</td>
          <td class="paramtype">dt&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(((dt) &amp; XOVF) == XOVF)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>1 if overflow in x movement </p>

</div>
</div>
<a class="anchor" id="aab5db4b8ea62f4cce4c01f703f0c8592"></a><!-- doxytag: member="KBC.H::Y_SIGN" ref="aab5db4b8ea62f4cce4c01f703f0c8592" args="(dt)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define Y_SIGN</td>
          <td>(</td>
          <td class="paramtype">dt&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td>&nbsp;&nbsp;&nbsp;(((dt) &amp; YSGN) == YSGN ? -1 : 1)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>1 if positive y movement, -1 if negative </p>

</div>
</div>
<a class="anchor" id="a08deb639aef83c70892a364261b09133"></a><!-- doxytag: member="KBC.H::YOVF" ref="a08deb639aef83c70892a364261b09133" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define YOVF&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 7)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>X overflow. </p>

</div>
</div>
<a class="anchor" id="a5c610c7c656c4cf62564a959c30e0245"></a><!-- doxytag: member="KBC.H::YSGN" ref="a5c610c7c656c4cf62564a959c30e0245" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define YSGN&nbsp;&nbsp;&nbsp;(1 &lt;&lt; 5)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Sign of data packet byte 3 (y movement). </p>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ac7a35f33ff72f90657561721b263c1d2"></a><!-- doxytag: member="KBC.H::disable_irq" ref="ac7a35f33ff72f90657561721b263c1d2" args="(int irq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void disable_irq </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>irq</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a71c80934bf15a4691e5a360fe0283227"></a><!-- doxytag: member="KBC.H::enable_irq" ref="a71c80934bf15a4691e5a360fe0283227" args="(int irq)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void enable_irq </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>irq</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a088f9ac488fbbf9ecf5a7238919c4e2c"></a><!-- doxytag: member="KBC.H::kbc_init" ref="a088f9ac488fbbf9ecf5a7238919c4e2c" args="(int debug)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int kbc_init </td>
          <td>(</td>
          <td class="paramtype">int&nbsp;</td>
          <td class="paramname"> <em>debug</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Initializes the KeyBoard Controller. If 'debug' is not 0 every read or write to the KBC, together with the read or writed data is echoed to the screen. In this mode the function name being executed is printed followed by a ':', add=xx means the I/O address written, and data=xx the data read or written.</p>
<p>A 1 is returned if a mouse is found.</p>
<p>The function starts to flush any pending data in the KBC, reading the data register until a timeout is received.</p>
<p>Then it enables the KBC mouse interface, send a MouseReset to the mouse and checks for the correct answer (0xFA, 0xAA then 0x00). If the mouse was detected, data streaming is disabled (StreamDisable), SampleRate is set to 100, Resolution is set to 8 counts/mm, Scaling is set to 1:1, the mouse interrupts generation are enabled at the KBC (not at the PIC!), and data streaming enabled (StreamEnable). All this (but StreamEnable) shouldn't be necessary, as MouseReset is supposed to do it properly.</p>
<p>The KBDRate is also set to its maximum speed.</p>
<p>Uses write_kbc_cmd(), <a class="el" href="_k_b_c_8_c.html#ab19779ea7896435b3d4a5ff8a420f37e">write_kbc_data()</a>, <a class="el" href="_k_b_c_8_c.html#a52a7ce44125208dfa303e597e6302a71">read_kbc()</a> and write_aux()</p>
<p>Example Output generated with debug = 1: <code></p>
<pre>
read_kbc: timeout
write_kbc: add=64 data=d4
write_kbc: add=60 data=ff
read_kbc: data=fa
read_kbc: data=aa
read_kbc: data= 0
write_kbc: add=60 data=f5
read_kbc: data=fa
write_kbc: add=64 data=a7
write_kbc: add=64 data=d4
write_kbc: add=60 data=f5
read_kbc: data=fa
write_kbc: add=60 data=f3
read_kbc: data=fa
write_kbc: add=60 data= 0
read_kbc: data=fa
write_kbc: add=64 data=d4
write_kbc: add=60 data=f3
read_kbc: data=fa
write_kbc: add=64 data=d4
write_kbc: add=60 data= a
read_kbc: data=fa
write_kbc: add=64 data=d4
write_kbc: add=60 data=e8
read_kbc: data=fa
write_kbc: add=64 data=d4
write_kbc: add=60 data= 1
read_kbc: data=fa
write_kbc: add=64 data=20
read_kbc: data=45
write_kbc: add=64 data=60
write_kbc: add=60 data=47
read_kbc: timeout
write_kbc: add=60 data=f4
read_kbc: data=fa
write_kbc: add=64 data=a8
write_kbc: add=64 data=d4
write_kbc: add=60 data=f4
read_kbc: data=fa
 </pre><p></code> </p>

</div>
</div>
<a class="anchor" id="a52a7ce44125208dfa303e597e6302a71"></a><!-- doxytag: member="KBC.H::read_kbc" ref="a52a7ce44125208dfa303e597e6302a71" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int read_kbc </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname"></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Returns the data read a the data register.</p>
<p>Waits for OBF on status register up to KBC_TIMEOUT milliseconds, then reads and returns the data read at the data register. Returns -1 on timeout or transmission error. </p>

</div>
</div>
<a class="anchor" id="ad0f4763c978797b701c51fe3841ebdb0"></a><!-- doxytag: member="KBC.H::write_kbc" ref="ad0f4763c978797b701c51fe3841ebdb0" args="(unsigned adr, unsigned data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int write_kbc </td>
          <td>(</td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>adr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Write 'data' at IO address 'adr' , returning -1 on error or timeout.</p>
<p>Waits for IBF on status register , than writes data to 'adr', return -1 on timeout. </p>

</div>
</div>
<a class="anchor" id="ab19779ea7896435b3d4a5ff8a420f37e"></a><!-- doxytag: member="KBC.H::write_kbc_data" ref="ab19779ea7896435b3d4a5ff8a420f37e" args="(unsigned data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int write_kbc_data </td>
          <td>(</td>
          <td class="paramtype">unsigned&nbsp;</td>
          <td class="paramname"> <em>data</em></td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Write 'data' to the data register, returning ACK, Error or -1 on timeout.</p>
<p>If a Resend reply is received from the KBC, it retries up to 3 times to write the data.</p>
<p>Uses <a class="el" href="_k_b_c_8_c.html#ad0f4763c978797b701c51fe3841ebdb0">write_kbc()</a> and <a class="el" href="_k_b_c_8_c.html#a52a7ce44125208dfa303e597e6302a71">read_kbc()</a> </p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ac3e1795766a80ec63b157951b4b9a7d4"></a><!-- doxytag: member="KBC.H::debug" ref="ac3e1795766a80ec63b157951b4b9a7d4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int <a class="el" href="_k_b_c_8_h.html#ac3e1795766a80ec63b157951b4b9a7d4">debug</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="a11e96bc1936d8f631c98829b4c565b9f"></a><!-- doxytag: member="KBC.H::old_irq2" ref="a11e96bc1936d8f631c98829b4c565b9f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">_go32_dpmi_seginfo <a class="el" href="_k_b_c_8_h.html#a11e96bc1936d8f631c98829b4c565b9f">old_irq2</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
</div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Thu May 27 17:49:39 2010 for Jogo do Galo by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
